<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Location Logga - Oxnard to UCSB</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
</head>

<body>
  <main>

    <div class="container">
      <h1>Oxnard to UCSB</h1>
      <div class="section">
        <h2>Data Insights for last 30 days</h2>
        <div id="oxn-gol-insight">
        </div>
      </div>
      <div class="divider"></div>
      <div class="section">
        <h2>Trip Data for last 30 Days (scatter)</h2>
        <div id="monthlyLookBack_OxnToGol" class="section">
        </div>
      </div>

    </div>

    <div class="container">
      <h1>UCSB to Oxnard</h1>

      <div class="section">
        <h2>Data Insights for last 30 days</h2>
        <div id="gol-oxn-insight">
        </div>
      </div>

      <div class="divider"></div>
      <div class="section">
        <h2>Trip Data for last 30 Days (scatter)</h2>
        <div id="monthlyLookBack_GoltoOxn" class="section">
        </div>
      </div>

    
    </div>

  </main>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
  <script src="./scripts/utils.js"></script>
  <script src="./scripts/drawChart.js"></script>
  <script src="./scripts/processData.js"></script>
  <script src="./scripts/footer.js"></script>

  
  <!-- Handle graph for 30daylb for OxnardToGoleta -->
  <script>

    // Each page section  has a different URI that needs to be plugged in   
    let graphObj_OxnToGol = {
      dataRaw: undefined, 
      dataAvg: undefined,
      insightsArr: undefined,
      dataURI: {
        lookBack: "https://storage.googleapis.com/location-logger-bucket/550forestparkblvdoxnardca93036usa-6510elcolegiordgoletaca93117usa/30day-lookback-10_2022.json"
      }
    }

    let graphObj_GolToOxn = {
      dataRaw: undefined, 
      dataAvg: undefined,
      insightsArr: undefined,
      dataURI: {
        lookBack: "https://storage.googleapis.com/location-logger-bucket/6510elcolegiordgoletaca93117usa-550forestparkblvdoxnardca93036usa/30day-lookback-10_2022.json"
      }
    }


    // TODO: plug in

    window.addEventListener('DOMContentLoaded', async (event) => {
      console.log('DOM fully loaded and parsed');

      // Draw Oxn -> Goleta
      graphObj_OxnToGol.dataRaw = await async_getDataFromBucket(graphObj_OxnToGol.dataURI.lookBack);
      graphObj_OxnToGol.dataAvg = getAveragedSetFromData(graphObj_OxnToGol.dataRaw);
      createCanvasObject(document, "monthlyLookBack_OxnToGol", "lookBack_OxnToGol");
      drawChart(graphObj_OxnToGol.dataRaw, graphObj_OxnToGol.dataAvg, "lookBack_OxnToGol", "Oxnard -> Goleta Scatter");
      let oxn_gol_insightObj = getInsights(graphObj_OxnToGol.dataRaw, graphObj_OxnToGol.dataAvg);
      let oxn_gol_insight_ref = document.getElementById("oxn-gol-insight");
      renderInsightsToDOMRef(oxn_gol_insight_ref, oxn_gol_insightObj)


      // Draw Goleta -> Oxn
      graphObj_GolToOxn.dataRaw = await async_getDataFromBucket(graphObj_GolToOxn.dataURI.lookBack);
      graphObj_GolToOxn.dataAvg = getAveragedSetFromData(graphObj_GolToOxn.dataRaw);
      createCanvasObject(document, "monthlyLookBack_GoltoOxn", "lookBack_GolToOxn");
      drawChart(graphObj_GolToOxn.dataRaw, graphObj_GolToOxn.dataAvg, "lookBack_GolToOxn",  "Goleta -> Oxnard Scatter");
      let gol_oxn_insightObj = getInsights(graphObj_GolToOxn.dataRaw, graphObj_GolToOxn.dataAvg);
      let gol_oxn_insight_ref = document.getElementById("gol-oxn-insight");
      renderInsightsToDOMRef(gol_oxn_insight_ref, gol_oxn_insightObj);
    });
  </script>



</body>

</html>